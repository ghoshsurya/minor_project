{% extends 'base.html' %}
{% load static %}

{% block title %}{{ cv.full_name }} CV - JobLift{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-12">
    <!-- Header -->
    <div class="flex justify-between items-center mb-8">
        <div>
            <h2 class="text-3xl font-bold text-white mb-2">{{ cv.full_name }}</h2>
            <p class="text-gray-300">{{ cv.template.name }} Template</p>
        </div>
        <div class="flex space-x-3">
            <a href="{% url 'cv_optimizer:download_created' cv.id %}" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold">
                <i class="fas fa-download mr-2"></i>Download PDF
            </a>
            <a href="{% url 'cv_optimizer:edit_created' cv.id %}" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg">
                <i class="fas fa-edit mr-2"></i>Edit
            </a>
        </div>
    </div>
    
    <!-- CV Preview -->
    <div class="bg-white text-gray-900 rounded-xl p-8 shadow-xl">
        <!-- Header -->
        <div class="text-center border-b-2 border-gray-200 pb-6 mb-6">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">{{ cv.full_name }}</h1>
            <div class="flex justify-center space-x-4 text-gray-600">
                <span><i class="fas fa-envelope mr-1"></i>{{ cv.email }}</span>
                {% if cv.phone %}<span><i class="fas fa-phone mr-1"></i>{{ cv.phone }}</span>{% endif %}
                {% if cv.linkedin_url %}<span><i class="fab fa-linkedin mr-1"></i>LinkedIn</span>{% endif %}
            </div>
            {% if cv.address %}<p class="text-gray-600 mt-2">{{ cv.address }}</p>{% endif %}
        </div>
        
        <!-- Professional Summary -->
        {% if cv.professional_summary %}
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-3 border-b border-gray-300 pb-1">Professional Summary</h2>
            <p class="text-gray-700 leading-relaxed">{{ cv.professional_summary }}</p>
        </div>
        {% endif %}
        
        <!-- Experience -->
        {% if cv.experience %}
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-3 border-b border-gray-300 pb-1">Work Experience</h2>
            {% for exp in cv.experience %}
            <div class="mb-4">
                <div class="flex justify-between items-start mb-2">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800">{{ exp.title }}</h3>
                        <p class="text-blue-600 font-medium">{{ exp.company }}</p>
                    </div>
                    <span class="text-gray-600 text-sm">{{ exp.start_date }} - {{ exp.end_date }}</span>
                </div>
                {% if exp.description %}
                <p class="text-gray-700">{{ exp.description }}</p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Education -->
        {% if cv.education %}
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-3 border-b border-gray-300 pb-1">Education</h2>
            {% for edu in cv.education %}
            <div class="mb-3">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800">{{ edu.degree }}</h3>
                        <p class="text-blue-600">{{ edu.institution }}</p>
                    </div>
                    <span class="text-gray-600 text-sm">{{ edu.year }}</span>
                </div>
                {% if edu.grade %}<p class="text-gray-600 text-sm">Grade: {{ edu.grade }}</p>{% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Skills -->
        {% if cv.skills %}
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-3 border-b border-gray-300 pb-1">Skills</h2>
            {% for category, skills_list in cv.skills.items %}
            <div class="mb-3">
                <h3 class="font-semibold text-gray-800 mb-1">{{ category }}</h3>
                <p class="text-gray-700">{{ skills_list|join:", " }}</p>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    
    <!-- Back Button -->
    <div class="text-center mt-8">
        <a href="{% url 'cv_optimizer:created_list' %}" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg">
            <i class="fas fa-arrow-left mr-2"></i>Back to My CVs
        </a>
    </div>
</div>
{% endblock %}